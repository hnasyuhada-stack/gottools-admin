<!-- users.html (UPDATED: Transactions -> Warnings) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Users – GotTools Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fade-in BEFORE loading main CSS (same as dashboard) -->
  <style>
    html{visibility:hidden;}
    html, body { background:#0b1220; margin:0; padding:0; }
    body { opacity:0; }
    body.fade-in { opacity:1; transition: opacity .25s ease-in; }
  </style>

  <!-- ✅ IMPORTANT: unhide HTML early (prevents blank page) -->
  <script>
    document.documentElement.style.visibility = "visible";
  </script>

  <!-- ✅ Use the SAME dashboard stylesheet -->
  <link rel="stylesheet" href="css/dashboard.css" />

  <!-- ✅ Users page extra styles (UI-only) -->
  <style>
    /* Page title block */
    .page-title{
      margin-top: 4px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .page-title h2{
      font-size: 20px;
      margin:0;
      font-weight: 950;
      letter-spacing:.2px;
      color: var(--text);
    }
    .page-title .sub{
      margin-top: 4px;
      font-size: 12px;
      font-weight: 700;
      color: var(--muted);
    }

    /* Small button variant */
    .btn-ghost-small{
      height: 38px;
      padding: 0 12px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.96);
      color: rgba(15,23,42,.92);
      cursor:pointer;
      transition: .18s ease;
      font-weight: 900;
      letter-spacing:.2px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      white-space: nowrap;
    }
    .btn-ghost-small:hover{
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(15,23,42,.12);
      border-color: rgba(255,138,61,.35);
    }

    /* Table action buttons */
    .btn-table{
      height: 32px;
      padding: 0 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      cursor: pointer;
      transition: .18s ease;
      font-family: inherit;
      white-space: nowrap;
      border: 1px solid rgba(255, 138, 61, .40);
      background: rgba(255, 138, 61, .12);
      color: #7c2d12;
    }
    .btn-table:hover{
      background: rgba(255, 138, 61, .18);
      border-color: rgba(255, 138, 61, .60);
      transform: translateY(-1px);
      box-shadow: 0 12px 20px rgba(15,23,42,.10);
    }
    .actions-stack{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

    /* Badges */
    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      line-height:1;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(248,250,252,.95);
      color: rgba(15,23,42,.85);
      white-space: nowrap;
    }
    .badge-muted{ background:#f2f4f7; color:#344054; border:1px solid rgba(52,64,84,0.10); }
    .badge-danger{ background:#ffe4e7; color:#b42318; border:1px solid rgba(180,35,24,0.14); }
    .badge-warn{ background:#fff6d6; color:#7a5c00; border:1px solid rgba(122,92,0,0.14); }
    .badge-ok{ background:#dcfce7; color:#166534; border:1px solid rgba(22,101,52,0.14); }

    @media (max-width: 980px){
      .btn-ghost-small{ width:100%; justify-content:center; }
    }

    /* =========================
       GotTools Modal (Users)
       ========================= */
    .gt-modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(2, 6, 23, .55);
      backdrop-filter: blur(6px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 18px;
    }
    .gt-modal-backdrop.show{ display:flex; }

    .gt-modal{
      width: min(720px, 96vw);
      border-radius: 18px;
      overflow: hidden;
      background: rgba(255,255,255,.97);
      border: 1px solid rgba(15,23,42,.10);
      box-shadow: 0 26px 60px rgba(15,23,42,.22);
      transform: translateY(6px);
      animation: gtPop .18s ease forwards;
    }
    @keyframes gtPop{ to { transform: translateY(0); } }

    .gt-modal-head{
      padding: 16px 16px 10px;
      border-bottom: 1px solid rgba(15,23,42,.08);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .gt-modal-title{
      margin:0;
      font-size: 16px;
      font-weight: 950;
      color: rgba(15,23,42,.92);
      letter-spacing: .2px;
    }
    .gt-modal-sub{
      margin: 4px 0 0;
      font-size: 12px;
      font-weight: 800;
      color: rgba(100,116,139,.95);
    }
    .gt-modal-x{
      width: 36px;
      height: 36px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(248,250,252,.9);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .gt-modal-x:hover{ box-shadow: 0 12px 20px rgba(15,23,42,.10); }

    .gt-modal-body{ padding: 14px 16px 6px; }

    .gt-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 720px){ .gt-grid{ grid-template-columns: 1fr; } }

    .gt-field{
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(248,250,252,.96);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .gt-field .k{
      font-size: 11px;
      font-weight: 900;
      color: rgba(100,116,139,.95);
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: .6px;
    }
    .gt-field .v{
      font-size: 13px;
      font-weight: 900;
      color: rgba(15,23,42,.90);
      word-break: break-word;
    }

    .gt-form{ margin-top: 12px; display: grid; gap: 10px; }
    .gt-label{
      font-size: 12px;
      font-weight: 900;
      color: rgba(15,23,42,.75);
      margin-bottom: 6px;
    }
    .gt-select,
    .gt-textarea{
      width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.98);
      padding: 10px 12px;
      font-family: inherit;
      font-weight: 800;
      outline: none;
    }
    .gt-textarea{ min-height: 92px; resize: vertical; }

    .gt-hint{ font-size: 11px; font-weight: 800; color: rgba(100,116,139,.95); }
    .gt-hint.danger{ color: #b42318; }

    .gt-modal-foot{
      padding: 12px 16px 16px;
      display:flex;
      justify-content:flex-end;
      gap: 10px;
    }

    .gt-btn{
      height: 38px;
      padding: 0 14px;
      border-radius: 999px;
      font-weight: 950;
      letter-spacing: .2px;
      cursor:pointer;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(248,250,252,.96);
      color: rgba(15,23,42,.92);
    }
    .gt-btn:hover{ box-shadow: 0 12px 20px rgba(15,23,42,.10); transform: translateY(-1px); }

    .gt-btn.primary{
      border-color: rgba(255,138,61,.45);
      background: rgba(255,138,61,.12);
      color: #7c2d12;
    }
    .gt-btn.danger{
      border-color: rgba(180,35,24,.25);
      background: rgba(180,35,24,.10);
      color: #b42318;
    }
    .gt-btn:disabled{
      opacity: .55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }
  </style>
</head>

<body>
<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-top">
      <div class="brand">
        <div class="brand-mark">
          <img src="img/logo.png" alt="GotTools Logo">
        </div>
        <div class="brand-text">
          <h1>GotTools? Admin</h1>
        </div>
      </div>

      <div class="sidebar-mini">
        <div class="mini-row">
          <div class="mini-avatar" style="background-image:url('img/profile.png');"></div>
          <div class="mini-info">
            <strong id="adminNameTop">Admin</strong>
            <span id="adminRoleTop">Admin</span>
          </div>
        </div>
      </div>
    </div>

    <nav class="sidebar-nav" aria-label="Sidebar Navigation">
      <a href="dashboard.html" class="sidebar-link">
        <img class="nav-ico" src="img/icons/nav-dashboard.png" alt="">
        <span>Dashboard</span>
      </a>

      <a href="reports.html" class="sidebar-link">
        <img class="nav-ico" src="img/icons/nav-reports.png" alt="">
        <span>Reports</span>
      </a>

      <a href="users.html" class="sidebar-link">
        <img class="nav-ico" src="img/icons/nav-users.png" alt="">
        <span>Users</span>
      </a>

      <a href="tools.html" class="sidebar-link">
        <img class="nav-ico" src="img/icons/nav-tools.png" alt="">
        <span>Tools / Listings</span>
      </a>

      <a href="settings.html" class="sidebar-link">
        <img class="nav-ico" src="img/icons/nav-settings.png" alt="">
        <span>Settings</span>
      </a>

      <div class="sidebar-divider"></div>

      <a href="#" class="sidebar-link danger" id="btnLogout">
        <img class="nav-ico" src="img/icons/nav-logout.png" alt="">
        <span>Log Out</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <p>GotTools? Admin Panel</p>
    </div>
  </aside>

  <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

  <!-- MAIN -->
  <main class="main">

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="topbar-left">
        <button class="hamburger-btn" onclick="toggleSidebar()" aria-label="Open sidebar">
          <img src="img/icons/nav-menu.png" alt="">
        </button>

        <div class="topbar-title">
          <p class="welcome">Welcome back, <span class="highlight" id="adminWelcomeName">Admin</span></p>
          <h2>Users</h2>
        </div>
      </div>

      <div class="topbar-right">

        <!-- Search -->
        <div class="search-container">
          <img class="search-ico" src="img/icons/nav-search.png" alt="">
          <input id="userSearchInput" type="text" placeholder="Search users..." />
          <button class="clear-btn" type="button"
            onclick="userSearchInput.value=''; userSearchInput.dispatchEvent(new Event('input')); ">
            <img src="img/icons/nav-close.png" alt="">
          </button>
        </div>

      </div>
    </header>

    <!-- PAGE TITLE -->
    <section class="page-title">
      <div>
        <h2>Manage Users</h2>
        <div class="sub">Manage community members, status and roles</div>
      </div>
    </section>

    <!-- STATS -->
    <section class="metric-grid" style="margin-top:12px; margin-bottom:12px;">
      <article class="metric-card">
        <div class="metric-head">
          <p class="metric-title">Total Users</p>
          <span class="metric-chip">All</span>
        </div>
        <p class="metric-value" id="mTotalUsers">0</p>
        <p class="metric-sub">Registered members</p>
      </article>

      <article class="metric-card">
        <div class="metric-head">
          <p class="metric-title">Active Users</p>
          <span class="metric-chip">Active</span>
        </div>
        <p class="metric-value" id="mActiveUsers">0</p>
        <p class="metric-sub">Active accounts</p>
      </article>

      <article class="metric-card warn">
        <div class="metric-head">
          <p class="metric-title">Suspended</p>
          <span class="metric-chip danger">Disabled</span>
        </div>
        <p class="metric-value" id="mSuspendedUsers">0</p>
        <p class="metric-sub">Accounts disabled</p>
      </article>

      <article class="metric-card">
        <div class="metric-head">
          <p class="metric-title">Admins</p>
          <span class="metric-chip">System</span>
        </div>
        <p class="metric-value" id="mAdminsMods">0</p>
        <p class="metric-sub">System admin accounts</p>
      </article>
    </section>

    <!-- USER TABLE -->
    <section class="card" style="margin-top:10px;">
      <div class="card-header">
        <div>
          <h3>Registered Users</h3>
          <small>View member details and manage account status</small>
        </div>
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>User</th>
              <th>Email</th>
              <th>Date Joined</th>
              <th>Warnings</th> <!-- ✅ UPDATED -->
              <th>Status</th>
              <th>Role</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="usersTbody"></tbody>
        </table>
      </div>
    </section>

  </main>
</div>

<!-- ✅ GotTools Modal -->
<div class="gt-modal-backdrop" id="gtModalBackdrop" aria-hidden="true">
  <div class="gt-modal" role="dialog" aria-modal="true" aria-labelledby="gtModalTitle">
    <div class="gt-modal-head">
      <div>
        <h3 class="gt-modal-title" id="gtModalTitle">Modal</h3>
        <p class="gt-modal-sub" id="gtModalSub">Sub</p>
      </div>
      <button class="gt-modal-x" id="gtModalCloseBtn" type="button" aria-label="Close">✕</button>
    </div>

    <div class="gt-modal-body" id="gtModalBody"></div>
    <div class="gt-modal-foot" id="gtModalFooter"></div>
  </div>
</div>

<script>
  function toggleSidebar() {
    document.querySelector(".sidebar").classList.toggle("show");
    document.querySelector(".sidebar-overlay").classList.toggle("active");
  }

  document.addEventListener("DOMContentLoaded", () => {
    const notifBtn = document.querySelector(".notification");
    const notifPanel = document.getElementById("notificationPanel");

    if (notifBtn && notifPanel) {
      notifBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        notifPanel.style.display =
          notifPanel.style.display === "block" ? "none" : "block";
      });

      document.addEventListener("click", (e) => {
        if (!notifPanel.contains(e.target) && !notifBtn.contains(e.target)) {
          notifPanel.style.display = "none";
        }
      });
    }

    const currentPage = location.pathname.split("/").pop().split("?")[0];
    document.querySelectorAll(".sidebar-link").forEach(link => {
      if (link.getAttribute("href") === currentPage) link.classList.add("active");
    });
  });
</script>

<script type="module" src="./js/users-page.js?v=20260123_1"></script>
<script type="module" src="./js/users.js?v=20260123_1"></script>


</body>
</html>
